<!doctype html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta http-equiv="x-ua-compatible" content="IE=edge">
        <title>FFmpeg Wasm YouTube Downloader</title>
        <meta name="description" content="Daren Liang's personal website">
        <meta name="author" content="Daren Liang">
        <link rel="preload" as="font" type="font/woff2" href="/fonts/space-grotesk-v15-latin-regular.woff2" crossorigin>
        <link rel="preload" as="font" type="font/woff2" href="/fonts/space-grotesk-v15-latin-700.woff2" crossorigin>
        <link rel="preload" as="font" type="font/woff2" href="/fonts/space-mono-v13-latin-regular.woff2" crossorigin>
        <style>
            a:hover,a:link {
                transition: color .2s ease-out
            }

            p>code,pre {
                color: var(--precolor);
                background: var(--prebgcolor)
            }

            .center,img {
                display: block
            }

            figure,img {
                margin: auto
            }

            body,button,code,figcaption,input,pre,textarea {
                font-family: space grotesk,sans-serif
            }

            code {
                font-family: space mono,monospace
            }

            @font-face {
                font-display: swap;
                font-family: space grotesk;
                font-style: normal;
                font-weight: 400;
                src: url(/fonts/space-grotesk-v15-latin-regular.eot);
                src: url(/fonts/space-grotesk-v15-latin-regular.eot?#iefix)format('embedded-opentype'),url(/fonts/space-grotesk-v15-latin-regular.woff2)format('woff2'),url(/fonts/space-grotesk-v15-latin-regular.woff)format('woff'),url(/fonts/space-grotesk-v15-latin-regular.ttf)format('truetype'),url(/fonts/space-grotesk-v15-latin-regular.svg#SpaceGrotesk)format('svg')
            }

            @font-face {
                font-display: swap;
                font-family: space grotesk;
                font-style: normal;
                font-weight: 700;
                src: url(/fonts/space-grotesk-v15-latin-700.eot);
                src: url(/fonts/space-grotesk-v15-latin-700.eot?#iefix)format('embedded-opentype'),url(/fonts/space-grotesk-v15-latin-700.woff2)format('woff2'),url(/fonts/space-grotesk-v15-latin-700.woff)format('woff'),url(/fonts/space-grotesk-v15-latin-700.ttf)format('truetype'),url(/fonts/space-grotesk-v15-latin-700.svg#SpaceGrotesk)format('svg')
            }

            @font-face {
                font-display: swap;
                font-family: space mono;
                font-style: normal;
                font-weight: 400;
                src: url(/fonts/space-mono-v13-latin-regular.eot);
                src: url(/fonts/space-mono-v13-latin-regular.eot?#iefix)format('embedded-opentype'),url(/fonts/space-mono-v13-latin-regular.woff2)format('woff2'),url(/fonts/space-mono-v13-latin-regular.woff)format('woff'),url(/fonts/space-mono-v13-latin-regular.ttf)format('truetype'),url(/fonts/space-mono-v13-latin-regular.svg#SpaceMono)format('svg')
            }

            html {
                overflow-y: scroll
            }

            :root {
                --bgcolor: #FFF;
                --fontcolor: #333333;
                --linkcolor: #3838cc;
                --visitedcolor: #3838cc;
                --hovercolor: #6617CB;
                --precolor: #FFF;
                --prebgcolor: #333333
            }

            body {
                max-width: 800px;
                margin: 40px auto;
                padding: 0 10px;
                line-height: 24px;
                color: var(--fontcolor);
                background: var(--bgcolor)
            }

            a:link {
                text-decoration: none;
                color: var(--linkcolor)
            }

            a:active,a:visited {
                color: var(--visitedcolor)
            }

            a:hover {
                color: var(--hovercolor)
            }

            h1,h2,h3 {
                line-height: 1.2
            }

            h1 {
                font-size: 2.5em
            }

            h2 {
                font-size: 2em
            }

            h3 {
                font-size: 1.5em
            }

            p>code {
                padding: 2px
            }

            pre {
                padding: 24px;
                overflow-x: auto
            }

            article {
                padding: 12px 0
            }

            .center {
                margin-left: auto;
                margin-right: auto;
                width: 100%
            }

            figcaption {
                color: #888;
                text-align: center
            }

            img {
                max-width: 100%;
                height: auto
            }

            button,input,textarea {
                margin: 3px 0
            }

            @media(prefers-color-scheme: dark) {
                :root {
                    --bgcolor:#0D1117;
                    --fontcolor: #CCCCCC;
                    --linkcolor: #5bf;
                    --visitedcolor: #5bf;
                    --hovercolor: #FC5296;
                    --precolor: #CCCCCC;
                    --prebgcolor: #0D1117
                }

                button,input,textarea {
                    border: 1px solid #ccc;
                    background-color: #0d1117;
                    color: #ccc
                }

                .boxed {
                    padding: 0 10px;
                    border: 1px solid #ccc
                }
            }

            @media(prefers-color-scheme: light) {
                button,input,textarea {
                    border:1px solid #333;
                    background-color: #fff;
                    color: #333
                }

                .boxed {
                    padding: 0 10px;
                    border: 1px solid #333
                }
            }

            div.highlight {
                font-size: 14px;
                line-height: 20px
            }

            div.highlight table pre {
                padding: 0
            }
        </style>
    </head>
    <body>
        <header>
            <div style="float:right"></div>
            <p>
            <nav>
                <a href="/">
                    <b>Home</b>
                </a>
                .

                <a href="/posts">
                    <b>Posts</b>
                </a>
                .

                <a href="/demos">
                    <b>Demos</b>
                </a>
                .

                <a href="/about">
                    <b>About</b>
                </a>
                .

                <a href="/projects">
                    <b>Projects</b>
                </a>
                .

                <a href="/doc/darenliang_resume.pdf">
                    <b>Resume</b>
                </a>
                .

            </nav>
</p></header>
<main>
    <article>
        <h1>FFmpeg Wasm YouTube Downloader</h1>
        <div>
            <p>
                This is a simple browser-based app (using <a href="https://github.com/ffmpegwasm/ffmpeg.wasm">ffmpeg.wasm</a>
                and <a href="https://github.com/fent/node-ytdl-core">node-ytdl-core</a>
                ) that allows you to download YouTube videos without the
need to use <a href="https://youtube-dl.org/">youtube-dl</a>
                locally.
            </p>
            <p>This demo is confirmed to work on modern Firefox/Chromium-based browsers.</p>
            <p>There are four options in this demo:</p>
            <ul>
                <li>
                    <strong>Get formats</strong>
                    : Manually select formats to merge. If video is selected, the output will be a video. If only audio is selected, the output will be an audio file.
                </li>
                <li>
                    <strong>Get fast video</strong>
                    : Get a high quality video file with audio. No encoding is done.
                </li>
                <li>
                    <strong>Get best video</strong>
                    : Encode the highest quality video file with audio. The best video and audio files are merged into a single file.
                </li>
                <li>
                    <strong>Get best audio</strong>
                    : Encode the highest quality audio file.
                </li>
            </ul>
            <p>
                The source code can be found <a href="https://github.com/darenliang/darenliang.com/tree/master/misc/ytdl-ffmpeg-demo">here</a>
                .
            </p>
            <style>
                input[type=radio] {
                    margin-right: 10px
                }
            </style>
            <p>
                <label>
                    YouTube video URL: <input type="text" id="url" style="width:100%">
                </label>
                <br>
                <button onclick="getFormats()">Get formats</button>
                <button onclick="getFastVideo()">Get fast video</button>
                <button onclick="getBestVideo()">Get best video</button>
                <button onclick="getBestAudio()">Get best audio</button>
            </p>
            <form id="formats" action="javascript:void(0);"></form>
            <div id="output" style="width:100%"></div>
            <br>
            <textarea id="log" style="height:200px;width:99%;resize:vertical;font-size:10px" readonly></textarea>
            <p>
                The comments section is disabled because <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy#certain_features_depend_on_cross-origin_isolation">cross-origin isolation</a>
                is enabled and the iframe cannot be loaded.
            </p>
            <p>
                <script async src="/js/ytdl-ffmpeg-demo-controller.min.js"></script>
                <script async src="/js/ytdl-ffmpeg-demo.min.js"></script>
            </p>
        </div>
    </article>
</main>
<footer>
    <p>
        &copy;2023 
        <a href="/">
            <b>Daren Liang</b>
        </a>
        .

        <a href="mailto:daren@darenliang.com">
            <b>Email</b>
        </a>
        .

        <a href="/pgp">
            <b>PGP</b>
        </a>
        .

        <a href="/index.xml">
            <b>RSS</b>
        </a>
        .

    </p>
</footer>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317" integrity="sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==" data-cf-beacon='{"rayId":"819e39892fd58d2a","r":1,"version":"2023.10.0","token":"41a27c10e1b84c7b87b70578b992cbea"}' crossorigin="anonymous"></script>
</body></html>
